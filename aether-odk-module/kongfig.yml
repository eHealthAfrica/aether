---
host: "kong:8001"
apis:
# ODK api for app level communication, requires an auth-key be included in all request headers as `apikey`
# Accessible via `http://{KONG_HOST}/odk`

  - name: "odk"
    ensure: "present"
    attributes:
      upstream_url: "https://odk:8443"
      uris:
        - "/odk"
      preserve_host: true
    plugins:
    - name: key-auth
      ensure: "present"
      attributes:
        config:
          key_names:
            - apikey
          hide_credentials: true

  - name: "odk-localhost"
    ensure: "present"
    attributes:
      upstream_url: "http://odk:8443"
      hosts:
        - "odk.aether.local"
      preserve_host: true
