#!/bin/bash
set -e

# Production specific functions

setup_user() {
  # arguments: -u=admin -p=secretsecret -e=admin@aether.org -t=01234656789abcdefghij
  ./manage.py setup_admin -p=$ADMIN_PASSWORD
}

check_variable() {
  if [ -n "$1" ];
  then
    echo "$2 in Ordnung!"
  else
    echo "Missing $2"
    exit -1
  fi
}

check_core() {
  # check if CORE env variables were set
  check_variable $AETHER_CORE_URL   "CORE url"
  check_variable $AETHER_CORE_TOKEN "CORE token"
}

check_core
setup_user
