[uwsgi]
callable          = application
master            = true
processes         = 4
threads           = %k

# up to 65535 (64k)
buffer-size       = 32768

gid               = aether
uid               = aether

safe-pidfile      = /var/run/aether/uwsgi.pid
touch-reload      = /var/run/aether/uwsgi.pid

chdir             = /code/
module            = django.core.wsgi:get_wsgi_application()

logto             = /var/run/aether/log/uwsgi.log
disable-logging   = true
log-4xx           = true
log-5xx           = true

http              = 0.0.0.0:$(WEB_SERVER_PORT)


# ------------------------------------------------------------------------------
if-env            = CUSTOM_UWSGI_SERVE_STATIC
static-expires    = /* 7776000
static-map        = $(STATIC_URL)=$(STATIC_ROOT)
route             = */favicon.ico$ static:$(STATIC_ROOT)/aether/images/aether.ico
endif             =
# ------------------------------------------------------------------------------


# https://uwsgi-docs.readthedocs.io/
