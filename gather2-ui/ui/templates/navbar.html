{% load i18n %}
{% load ui_tags %}

<div class="m-b-1">
  <nav class="navbar navbar-toggleable-md sticky-top">
    <button type="button"
      class="navbar-toggler navbar-toggler-right"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="{% trans 'Toggle navigation' %}">
      &#9776;
    </button>

    <a class="navbar-brand" href="/" title="{{app_name}}">
       <div class="logo-container">
          <div class="flipper">
            <div class="front">
            </div>
            <div class="back">
            </div>
          </div>
        </div>
        <span data-app-name="app-name">{{app_name}}</span>
    </a>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      {% if request.user.is_authenticated %}
        <ul class="nav navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'surveys-list' %}">{% trans 'Surveys' %}</a>
          </li>
          <li class="nav-item">
            <form name="search"
                  method="GET"
                  action="{% url 'search' %}"
                  class="form-inline">
              <i class="fa fa-search" aria-hidden="true"></i>
              <input type="search"
                     name="search"
                     value="{{ request.GET.search }}"
                     placeholder="{% trans 'Search in surveysâ€¦' %}"
                     required="true">
            </form>
          </li>
          <li class="nav-item">
            <a class="btn nav-link" href="{% url 'manage-survey' %}">
              <i class="fa fa-plus" aria-hidden="true"></i>
              <span>{% trans 'Add survey' %}</span>
            </a>
          </li>
        </ul>
        <ul class="nav navbar-nav pull-right">
          <li class="nav-item user-name">
            <span
              id="logged-in-user-info"
              data-user-id="{{ request.user.id }}">
              {{ request.user|get_fullname }}
            </span>
          </li>
          <li class="logout">
            <a class="nav-link" href="{% url 'rest_framework:logout' %}">
              <i class="fa fa-sign-out" title="{% trans 'Sign Out' %}" aria-hidden="true"></i>
            </a>
          </li>
        </ul>

      {% else %}
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0"></ul>

        <ul class="nav navbar-nav my-2 my-lg-0">
          <li class="nav-item">
            <a id="log-in-link" class="nav-link" href="{% url 'rest_framework:login' %}">{% trans 'Sign In' %}</a>
          </li>
        </ul>

      {% endif %}
    </div>
  </nav>
</div>
